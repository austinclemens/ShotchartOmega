<html>
    <head>
        <script src="lib/jquery.min.js"></script>
        <script src="http://code.jquery.com/jquery-2.0.3.js"></script>
        <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
        <script src="lib/simple-expand.min.js"></script>
    <style>
    #container {
   width:900px;
   margin-left:auto;
   margin-right:auto;
   margin-bottom:0px;
   margin-top:0px;
}

    .expander {
      color: #0099ff;
      text-decoration: none;
    }

    a: visited {
      color: #0099ff;
    }
    </style>
    </head>
    <body style="padding:0">
<div id='container'>
<button type="button" class="myButton" onClick="draw_png()">Save as PNG</button>
<br>

<select id="year_select" class="myButton" style="width:120px">
<option value="1996">1996-97</option>
<option value="1997">1997-98</option>
<option value="1998">1998-99</option>
<option value="1999">1999-00</option>
<option value="2000">2000-01</option>
<option value="2001">2001-02</option>
<option value="2002">2002-03</option>
<option value="2003">2003-04</option>
<option value="2004">2004-05</option>
<option value="2005">2005-06</option>
<option value="2006">2006-07</option>
<option value="2007">2007-08</option>
<option value="2008">2008-09</option>
<option value="2009">2009-10</option>
<option value="2010">2010-11</option>
<option value="2011">2011-12</option>
<option value="2012">2012-13</option>
<option selected value="2013">2013-14</option>
<option value="Career">Career</option>
</select>

<select id="player_select" class="myButton" style="width:200px">
<option selected>Select a player</option>
</select>

<select id="efficient_select" class="myButton" style="width:200px">
<option selected value=0>Field Goal %</option>
<option value=1>Efficiency (PPS)</option>
</select>

<button type="button" class="myButton" onClick="update()"><b>Run it!</b></button>
<br>
<hr noshade>
</div><div id="container"><a class="expander" href="#"><h3>Advanced Features (click me)</h3></a>
<div class="content">
<select id="player2_select" class="myButton" style="width:200px">
<option selected>Player 2</option>
</select>
<select id="player3_select" class="myButton" style="width:200px">
<option selected>Player 3</option>
</select><br>
<select id="player4_select" class="myButton" style="width:200px">
<option selected>Player 4</option>
</select>
<select id="player5_select" class="myButton" style="width:200px">
<option selected>Player 5</option>
</select><br>
<select id="quarter_select" class="myButton" style="width:200px">
<option selected value=0>All quarters</option>
<option value=1>1st</option>
<option value=1>2nd</option>
<option value=1>3rd</option>
<option value=1>4th</option>
</select>
<select id="quarter_select" class="myButton" style="width:200px">
<option selected value=0>Regular Season</option>
<option value=1>Post Season</option>
</select>
</div>
</div>

<div class="iframeWrapper" style="position: relative; padding-bottom: 74.25%; padding-top: 25px; height: 0;">
<iframe id="blah" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="canvas_shot.html?player=Dirk Nowitzki&year=2013&efficient=0" frameborder="0" align="middle" width=900 height=660 seamless="seamless" scrolling="no" class="aligncenter"></iframe></div>
<br>

<b>Can I use this?</b> Please do! Simply right click and download the graphic or drag it to your desktop. Use it in an article or blog, post on Twitter, or use it for leverage in your free agency contract negotiations! You may also alter the images to insert comments, arrows, or similar graphical items, but please do not alter or remove the Twitter tag or the NylonCalculus address.
<br><br>
<b>Field Goal %:</b> Colors reflect the player's FG% from a particular area compared to the NBA average from that area. Squares represent 1ft x 1ft boxes but shots are collected from within five feet of the box and then given a weight corresponding to: 1/&radic;<span style="text-decoration: overline;">d</span> where d is the shot's distance from the center of the box. This provides for some continuity of color while also allowing FG% to vary smoothly across the court. The boxes provide fairly accurate representations of where a player takes his shots, but should not be considered an exact guide to shot locations (some compromises were made for design). Generally, the placement of boxes exaggerates a player's tendence. A player who prefers the left side, for example, will appear to favor the left side more than he really does.
<br><br>
<b>Efficiency:</b> Colors represent how a player's PPS (points per shot) inside that box compare to leaguewide average PPS from all locations on the court. A given year, therefore, has just one point of comparison. For most years, league average PPS is about 1. Methodology is otherwise identical to that for field goal % charts.
<br><br>
<b>Late 90s Data Disclaimer:</b> Data from 1996, and to a lesser extent data from 97 and 98, has known problems. The NBA appears to have kept coarser location data back then, especially around the hoop, where virtually all shots were chunked into the same bin. It also seems that some shots simply have inaccurate location data. Unfortunately it is difficult to correct for these innacuracies, so the late 90's charts should be interpreted cautiously.</div>


<script>
var e = document.getElementById("year_select");
var z_year = e.options[e.selectedIndex].value;
$("#player_select").load("place_years/" + z_year + ".txt");

$("#year_select").change(function() {
   $("#player_select").load("place_years/" + $(this).val() + ".txt");
});

function update() {
    var e = document.getElementById("year_select");
    var u_year = e.options[e.selectedIndex].value;

    var e = document.getElementById("player_select");
    var u_player = e.options[e.selectedIndex].value;

    var e = document.getElementById("efficient_select");
    var u_efficient = e.options[e.selectedIndex].value;

    document.getElementById('blah').src = 'canvas_shot.html?player='+u_player+"&year="+u_year+"&efficient="+u_efficient
}

function draw_png() {
    var iframe = document.getElementById('blah');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;    
    var result = innerDoc.getElementById('result');
    var cv=innerDoc.getElementById('court');
    cv.style.display="none";
    var ur = cv.toDataURL();
    result.src=ur;
    result.style.width = 900;
}

$('.expander').simpleexpand();

</script>
    </body>
</html>
